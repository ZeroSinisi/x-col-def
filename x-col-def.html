<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../polymer/lib/legacy/templatizer-behavior.html">
<link rel="import" href="../vaadin-grid/vaadin-grid-column.html">
<dom-module id="x-col-def">
    <template>
        <template id="template">
            <vaadin-grid-column>
                <template class="header">[[column]]</template>
                <template>[[get(column, item)]]</template>
            </vaadin-grid-column>
        </template>
    </template>
    <script>
        Polymer({
            is: 'x-col-def',

            behaviors: [Polymer.Templatizer],

            _generateColumns() {
                this.columns.forEach(c => {
                    let renderer = this.stamp(null);
                    renderer.column = c;
                    Polymer.dom(this.parentNode).insertBefore(renderer.root, this);
                });
            },

            ready() {
                this.templatize(this.$.template);
                this.columns = ["email", "gender"];
                this._generateColumns();
            }
        });
    </script>
</dom-module>
